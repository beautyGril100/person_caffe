<script type="text/javascript">data="ts☯1☯(None, 224, 224, 3)☯Placeholder:0☯☯&ts☯2☯(3, 3, 3, 32)☯MobilenetV1/Conv2d_0/weights:0☯☯3卍op☯3☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_0/Conv2D☯1 2☯4卍ts☯4☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_0/Conv2D:0☯3☯9&ts☯5☯(32,)☯MobilenetV1/Conv2d_0/BatchNorm/gamma:0☯☯9&ts☯6☯(32,)☯MobilenetV1/Conv2d_0/BatchNorm/beta:0☯☯9&ts☯7☯(32,)☯MobilenetV1/Conv2d_0/BatchNorm/moving_mean:0☯☯9&ts☯8☯(32,)☯MobilenetV1/Conv2d_0/BatchNorm/moving_variance:0☯☯9卍op☯9☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_0/BatchNorm/FusedBatchNorm☯4 5 6 7 8☯10 11 12 13 14卍ts☯10☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_0/BatchNorm/FusedBatchNorm:0☯9☯15卍op☯15☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_0/Relu6☯10☯16卍ts☯16☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_0/Relu6:0☯15☯18&ts☯17☯(3, 3, 32, 1)☯MobilenetV1/Conv2d_1_depthwise/depthwise_weights:0☯☯18卍op☯18☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise☯16 17☯19卍ts☯19☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise:0☯18☯24&ts☯20☯(32,)☯MobilenetV1/Conv2d_1_depthwise/BatchNorm/gamma:0☯☯24&ts☯21☯(32,)☯MobilenetV1/Conv2d_1_depthwise/BatchNorm/beta:0☯☯24&ts☯22☯(32,)☯MobilenetV1/Conv2d_1_depthwise/BatchNorm/moving_mean:0☯☯24&ts☯23☯(32,)☯MobilenetV1/Conv2d_1_depthwise/BatchNorm/moving_variance:0☯☯24卍op☯24☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/BatchNorm/FusedBatchNorm☯19 20 21 22 23☯25 26 27 28 29卍ts☯25☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/BatchNorm/FusedBatchNorm:0☯24☯30卍op☯30☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/Relu6☯25☯31卍ts☯31☯(None, 112, 112, 32)☯MobilenetV1/MobilenetV1/Conv2d_1_depthwise/Relu6:0☯30☯33&ts☯32☯(1, 1, 32, 64)☯MobilenetV1/Conv2d_1_pointwise/weights:0☯☯33卍op☯33☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/Conv2D☯31 32☯34卍ts☯34☯(None, 112, 112, 64)☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/Conv2D:0☯33☯39&ts☯35☯(64,)☯MobilenetV1/Conv2d_1_pointwise/BatchNorm/gamma:0☯☯39&ts☯36☯(64,)☯MobilenetV1/Conv2d_1_pointwise/BatchNorm/beta:0☯☯39&ts☯37☯(64,)☯MobilenetV1/Conv2d_1_pointwise/BatchNorm/moving_mean:0☯☯39&ts☯38☯(64,)☯MobilenetV1/Conv2d_1_pointwise/BatchNorm/moving_variance:0☯☯39卍op☯39☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/BatchNorm/FusedBatchNorm☯34 35 36 37 38☯40 41 42 43 44卍ts☯40☯(None, 112, 112, 64)☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/BatchNorm/FusedBatchNorm:0☯39☯45卍op☯45☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/Relu6☯40☯46卍ts☯46☯(None, 112, 112, 64)☯MobilenetV1/MobilenetV1/Conv2d_1_pointwise/Relu6:0☯45☯48&ts☯47☯(3, 3, 64, 1)☯MobilenetV1/Conv2d_2_depthwise/depthwise_weights:0☯☯48卍op☯48☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/depthwise☯46 47☯49卍ts☯49☯(None, 56, 56, 64)☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/depthwise:0☯48☯54&ts☯50☯(64,)☯MobilenetV1/Conv2d_2_depthwise/BatchNorm/gamma:0☯☯54&ts☯51☯(64,)☯MobilenetV1/Conv2d_2_depthwise/BatchNorm/beta:0☯☯54&ts☯52☯(64,)☯MobilenetV1/Conv2d_2_depthwise/BatchNorm/moving_mean:0☯☯54&ts☯53☯(64,)☯MobilenetV1/Conv2d_2_depthwise/BatchNorm/moving_variance:0☯☯54卍op☯54☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/BatchNorm/FusedBatchNorm☯49 50 51 52 53☯55 56 57 58 59卍ts☯55☯(None, 56, 56, 64)☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/BatchNorm/FusedBatchNorm:0☯54☯60卍op☯60☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/Relu6☯55☯61卍ts☯61☯(None, 56, 56, 64)☯MobilenetV1/MobilenetV1/Conv2d_2_depthwise/Relu6:0☯60☯63&ts☯62☯(1, 1, 64, 128)☯MobilenetV1/Conv2d_2_pointwise/weights:0☯☯63卍op☯63☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/Conv2D☯61 62☯64卍ts☯64☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/Conv2D:0☯63☯69&ts☯65☯(128,)☯MobilenetV1/Conv2d_2_pointwise/BatchNorm/gamma:0☯☯69&ts☯66☯(128,)☯MobilenetV1/Conv2d_2_pointwise/BatchNorm/beta:0☯☯69&ts☯67☯(128,)☯MobilenetV1/Conv2d_2_pointwise/BatchNorm/moving_mean:0☯☯69&ts☯68☯(128,)☯MobilenetV1/Conv2d_2_pointwise/BatchNorm/moving_variance:0☯☯69卍op☯69☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/BatchNorm/FusedBatchNorm☯64 65 66 67 68☯70 71 72 73 74卍ts☯70☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/BatchNorm/FusedBatchNorm:0☯69☯75卍op☯75☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/Relu6☯70☯76卍ts☯76☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_2_pointwise/Relu6:0☯75☯78&ts☯77☯(3, 3, 128, 1)☯MobilenetV1/Conv2d_3_depthwise/depthwise_weights:0☯☯78卍op☯78☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/depthwise☯76 77☯79卍ts☯79☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/depthwise:0☯78☯84&ts☯80☯(128,)☯MobilenetV1/Conv2d_3_depthwise/BatchNorm/gamma:0☯☯84&ts☯81☯(128,)☯MobilenetV1/Conv2d_3_depthwise/BatchNorm/beta:0☯☯84&ts☯82☯(128,)☯MobilenetV1/Conv2d_3_depthwise/BatchNorm/moving_mean:0☯☯84&ts☯83☯(128,)☯MobilenetV1/Conv2d_3_depthwise/BatchNorm/moving_variance:0☯☯84卍op☯84☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/BatchNorm/FusedBatchNorm☯79 80 81 82 83☯85 86 87 88 89卍ts☯85☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/BatchNorm/FusedBatchNorm:0☯84☯90卍op☯90☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/Relu6☯85☯91卍ts☯91☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_depthwise/Relu6:0☯90☯93&ts☯92☯(1, 1, 128, 128)☯MobilenetV1/Conv2d_3_pointwise/weights:0☯☯93卍op☯93☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/Conv2D☯91 92☯94卍ts☯94☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/Conv2D:0☯93☯99&ts☯95☯(128,)☯MobilenetV1/Conv2d_3_pointwise/BatchNorm/gamma:0☯☯99&ts☯96☯(128,)☯MobilenetV1/Conv2d_3_pointwise/BatchNorm/beta:0☯☯99&ts☯97☯(128,)☯MobilenetV1/Conv2d_3_pointwise/BatchNorm/moving_mean:0☯☯99&ts☯98☯(128,)☯MobilenetV1/Conv2d_3_pointwise/BatchNorm/moving_variance:0☯☯99卍op☯99☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/BatchNorm/FusedBatchNorm☯94 95 96 97 98☯100 101 102 103 104卍ts☯100☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/BatchNorm/FusedBatchNorm:0☯99☯105卍op☯105☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/Relu6☯100☯106卍ts☯106☯(None, 56, 56, 128)☯MobilenetV1/MobilenetV1/Conv2d_3_pointwise/Relu6:0☯105☯108&ts☯107☯(3, 3, 128, 1)☯MobilenetV1/Conv2d_4_depthwise/depthwise_weights:0☯☯108卍op☯108☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/depthwise☯106 107☯109卍ts☯109☯(None, 28, 28, 128)☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/depthwise:0☯108☯114&ts☯110☯(128,)☯MobilenetV1/Conv2d_4_depthwise/BatchNorm/gamma:0☯☯114&ts☯111☯(128,)☯MobilenetV1/Conv2d_4_depthwise/BatchNorm/beta:0☯☯114&ts☯112☯(128,)☯MobilenetV1/Conv2d_4_depthwise/BatchNorm/moving_mean:0☯☯114&ts☯113☯(128,)☯MobilenetV1/Conv2d_4_depthwise/BatchNorm/moving_variance:0☯☯114卍op☯114☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/BatchNorm/FusedBatchNorm☯109 110 111 112 113☯115 116 117 118 119卍ts☯115☯(None, 28, 28, 128)☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/BatchNorm/FusedBatchNorm:0☯114☯120卍op☯120☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/Relu6☯115☯121卍ts☯121☯(None, 28, 28, 128)☯MobilenetV1/MobilenetV1/Conv2d_4_depthwise/Relu6:0☯120☯123&ts☯122☯(1, 1, 128, 256)☯MobilenetV1/Conv2d_4_pointwise/weights:0☯☯123卍op☯123☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/Conv2D☯121 122☯124卍ts☯124☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/Conv2D:0☯123☯129&ts☯125☯(256,)☯MobilenetV1/Conv2d_4_pointwise/BatchNorm/gamma:0☯☯129&ts☯126☯(256,)☯MobilenetV1/Conv2d_4_pointwise/BatchNorm/beta:0☯☯129&ts☯127☯(256,)☯MobilenetV1/Conv2d_4_pointwise/BatchNorm/moving_mean:0☯☯129&ts☯128☯(256,)☯MobilenetV1/Conv2d_4_pointwise/BatchNorm/moving_variance:0☯☯129卍op☯129☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/BatchNorm/FusedBatchNorm☯124 125 126 127 128☯130 131 132 133 134卍ts☯130☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/BatchNorm/FusedBatchNorm:0☯129☯135卍op☯135☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/Relu6☯130☯136卍ts☯136☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_4_pointwise/Relu6:0☯135☯138&ts☯137☯(3, 3, 256, 1)☯MobilenetV1/Conv2d_5_depthwise/depthwise_weights:0☯☯138卍op☯138☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/depthwise☯136 137☯139卍ts☯139☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/depthwise:0☯138☯144&ts☯140☯(256,)☯MobilenetV1/Conv2d_5_depthwise/BatchNorm/gamma:0☯☯144&ts☯141☯(256,)☯MobilenetV1/Conv2d_5_depthwise/BatchNorm/beta:0☯☯144&ts☯142☯(256,)☯MobilenetV1/Conv2d_5_depthwise/BatchNorm/moving_mean:0☯☯144&ts☯143☯(256,)☯MobilenetV1/Conv2d_5_depthwise/BatchNorm/moving_variance:0☯☯144卍op☯144☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/BatchNorm/FusedBatchNorm☯139 140 141 142 143☯145 146 147 148 149卍ts☯145☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/BatchNorm/FusedBatchNorm:0☯144☯150卍op☯150☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/Relu6☯145☯151卍ts☯151☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_depthwise/Relu6:0☯150☯153&ts☯152☯(1, 1, 256, 256)☯MobilenetV1/Conv2d_5_pointwise/weights:0☯☯153卍op☯153☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/Conv2D☯151 152☯154卍ts☯154☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/Conv2D:0☯153☯159&ts☯155☯(256,)☯MobilenetV1/Conv2d_5_pointwise/BatchNorm/gamma:0☯☯159&ts☯156☯(256,)☯MobilenetV1/Conv2d_5_pointwise/BatchNorm/beta:0☯☯159&ts☯157☯(256,)☯MobilenetV1/Conv2d_5_pointwise/BatchNorm/moving_mean:0☯☯159&ts☯158☯(256,)☯MobilenetV1/Conv2d_5_pointwise/BatchNorm/moving_variance:0☯☯159卍op☯159☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/BatchNorm/FusedBatchNorm☯154 155 156 157 158☯160 161 162 163 164卍ts☯160☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/BatchNorm/FusedBatchNorm:0☯159☯165卍op☯165☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/Relu6☯160☯166卍ts☯166☯(None, 28, 28, 256)☯MobilenetV1/MobilenetV1/Conv2d_5_pointwise/Relu6:0☯165☯168&ts☯167☯(3, 3, 256, 1)☯MobilenetV1/Conv2d_6_depthwise/depthwise_weights:0☯☯168卍op☯168☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/depthwise☯166 167☯169卍ts☯169☯(None, 14, 14, 256)☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/depthwise:0☯168☯174&ts☯170☯(256,)☯MobilenetV1/Conv2d_6_depthwise/BatchNorm/gamma:0☯☯174&ts☯171☯(256,)☯MobilenetV1/Conv2d_6_depthwise/BatchNorm/beta:0☯☯174&ts☯172☯(256,)☯MobilenetV1/Conv2d_6_depthwise/BatchNorm/moving_mean:0☯☯174&ts☯173☯(256,)☯MobilenetV1/Conv2d_6_depthwise/BatchNorm/moving_variance:0☯☯174卍op☯174☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/BatchNorm/FusedBatchNorm☯169 170 171 172 173☯175 176 177 178 179卍ts☯175☯(None, 14, 14, 256)☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/BatchNorm/FusedBatchNorm:0☯174☯180卍op☯180☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/Relu6☯175☯181卍ts☯181☯(None, 14, 14, 256)☯MobilenetV1/MobilenetV1/Conv2d_6_depthwise/Relu6:0☯180☯183&ts☯182☯(1, 1, 256, 512)☯MobilenetV1/Conv2d_6_pointwise/weights:0☯☯183卍op☯183☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/Conv2D☯181 182☯184卍ts☯184☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/Conv2D:0☯183☯189&ts☯185☯(512,)☯MobilenetV1/Conv2d_6_pointwise/BatchNorm/gamma:0☯☯189&ts☯186☯(512,)☯MobilenetV1/Conv2d_6_pointwise/BatchNorm/beta:0☯☯189&ts☯187☯(512,)☯MobilenetV1/Conv2d_6_pointwise/BatchNorm/moving_mean:0☯☯189&ts☯188☯(512,)☯MobilenetV1/Conv2d_6_pointwise/BatchNorm/moving_variance:0☯☯189卍op☯189☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/BatchNorm/FusedBatchNorm☯184 185 186 187 188☯190 191 192 193 194卍ts☯190☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/BatchNorm/FusedBatchNorm:0☯189☯195卍op☯195☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/Relu6☯190☯196卍ts☯196☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_6_pointwise/Relu6:0☯195☯198&ts☯197☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_7_depthwise/depthwise_weights:0☯☯198卍op☯198☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/depthwise☯196 197☯199卍ts☯199☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/depthwise:0☯198☯204&ts☯200☯(512,)☯MobilenetV1/Conv2d_7_depthwise/BatchNorm/gamma:0☯☯204&ts☯201☯(512,)☯MobilenetV1/Conv2d_7_depthwise/BatchNorm/beta:0☯☯204&ts☯202☯(512,)☯MobilenetV1/Conv2d_7_depthwise/BatchNorm/moving_mean:0☯☯204&ts☯203☯(512,)☯MobilenetV1/Conv2d_7_depthwise/BatchNorm/moving_variance:0☯☯204卍op☯204☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/BatchNorm/FusedBatchNorm☯199 200 201 202 203☯205 206 207 208 209卍ts☯205☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/BatchNorm/FusedBatchNorm:0☯204☯210卍op☯210☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/Relu6☯205☯211卍ts☯211☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_depthwise/Relu6:0☯210☯213&ts☯212☯(1, 1, 512, 512)☯MobilenetV1/Conv2d_7_pointwise/weights:0☯☯213卍op☯213☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/Conv2D☯211 212☯214卍ts☯214☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/Conv2D:0☯213☯219&ts☯215☯(512,)☯MobilenetV1/Conv2d_7_pointwise/BatchNorm/gamma:0☯☯219&ts☯216☯(512,)☯MobilenetV1/Conv2d_7_pointwise/BatchNorm/beta:0☯☯219&ts☯217☯(512,)☯MobilenetV1/Conv2d_7_pointwise/BatchNorm/moving_mean:0☯☯219&ts☯218☯(512,)☯MobilenetV1/Conv2d_7_pointwise/BatchNorm/moving_variance:0☯☯219卍op☯219☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/BatchNorm/FusedBatchNorm☯214 215 216 217 218☯220 221 222 223 224卍ts☯220☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/BatchNorm/FusedBatchNorm:0☯219☯225卍op☯225☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/Relu6☯220☯226卍ts☯226☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_7_pointwise/Relu6:0☯225☯228&ts☯227☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_8_depthwise/depthwise_weights:0☯☯228卍op☯228☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/depthwise☯226 227☯229卍ts☯229☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/depthwise:0☯228☯234&ts☯230☯(512,)☯MobilenetV1/Conv2d_8_depthwise/BatchNorm/gamma:0☯☯234&ts☯231☯(512,)☯MobilenetV1/Conv2d_8_depthwise/BatchNorm/beta:0☯☯234&ts☯232☯(512,)☯MobilenetV1/Conv2d_8_depthwise/BatchNorm/moving_mean:0☯☯234&ts☯233☯(512,)☯MobilenetV1/Conv2d_8_depthwise/BatchNorm/moving_variance:0☯☯234卍op☯234☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/BatchNorm/FusedBatchNorm☯229 230 231 232 233☯235 236 237 238 239卍ts☯235☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/BatchNorm/FusedBatchNorm:0☯234☯240卍op☯240☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/Relu6☯235☯241卍ts☯241☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_depthwise/Relu6:0☯240☯243&ts☯242☯(1, 1, 512, 512)☯MobilenetV1/Conv2d_8_pointwise/weights:0☯☯243卍op☯243☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/Conv2D☯241 242☯244卍ts☯244☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/Conv2D:0☯243☯249&ts☯245☯(512,)☯MobilenetV1/Conv2d_8_pointwise/BatchNorm/gamma:0☯☯249&ts☯246☯(512,)☯MobilenetV1/Conv2d_8_pointwise/BatchNorm/beta:0☯☯249&ts☯247☯(512,)☯MobilenetV1/Conv2d_8_pointwise/BatchNorm/moving_mean:0☯☯249&ts☯248☯(512,)☯MobilenetV1/Conv2d_8_pointwise/BatchNorm/moving_variance:0☯☯249卍op☯249☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/BatchNorm/FusedBatchNorm☯244 245 246 247 248☯250 251 252 253 254卍ts☯250☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/BatchNorm/FusedBatchNorm:0☯249☯255卍op☯255☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/Relu6☯250☯256卍ts☯256☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_8_pointwise/Relu6:0☯255☯258&ts☯257☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_9_depthwise/depthwise_weights:0☯☯258卍op☯258☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/depthwise☯256 257☯259卍ts☯259☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/depthwise:0☯258☯264&ts☯260☯(512,)☯MobilenetV1/Conv2d_9_depthwise/BatchNorm/gamma:0☯☯264&ts☯261☯(512,)☯MobilenetV1/Conv2d_9_depthwise/BatchNorm/beta:0☯☯264&ts☯262☯(512,)☯MobilenetV1/Conv2d_9_depthwise/BatchNorm/moving_mean:0☯☯264&ts☯263☯(512,)☯MobilenetV1/Conv2d_9_depthwise/BatchNorm/moving_variance:0☯☯264卍op☯264☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/BatchNorm/FusedBatchNorm☯259 260 261 262 263☯265 266 267 268 269卍ts☯265☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/BatchNorm/FusedBatchNorm:0☯264☯270卍op☯270☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/Relu6☯265☯271卍ts☯271☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_depthwise/Relu6:0☯270☯273&ts☯272☯(1, 1, 512, 512)☯MobilenetV1/Conv2d_9_pointwise/weights:0☯☯273卍op☯273☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/Conv2D☯271 272☯274卍ts☯274☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/Conv2D:0☯273☯279&ts☯275☯(512,)☯MobilenetV1/Conv2d_9_pointwise/BatchNorm/gamma:0☯☯279&ts☯276☯(512,)☯MobilenetV1/Conv2d_9_pointwise/BatchNorm/beta:0☯☯279&ts☯277☯(512,)☯MobilenetV1/Conv2d_9_pointwise/BatchNorm/moving_mean:0☯☯279&ts☯278☯(512,)☯MobilenetV1/Conv2d_9_pointwise/BatchNorm/moving_variance:0☯☯279卍op☯279☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/BatchNorm/FusedBatchNorm☯274 275 276 277 278☯280 281 282 283 284卍ts☯280☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/BatchNorm/FusedBatchNorm:0☯279☯285卍op☯285☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/Relu6☯280☯286卍ts☯286☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_9_pointwise/Relu6:0☯285☯288&ts☯287☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_10_depthwise/depthwise_weights:0☯☯288卍op☯288☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/depthwise☯286 287☯289卍ts☯289☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/depthwise:0☯288☯294&ts☯290☯(512,)☯MobilenetV1/Conv2d_10_depthwise/BatchNorm/gamma:0☯☯294&ts☯291☯(512,)☯MobilenetV1/Conv2d_10_depthwise/BatchNorm/beta:0☯☯294&ts☯292☯(512,)☯MobilenetV1/Conv2d_10_depthwise/BatchNorm/moving_mean:0☯☯294&ts☯293☯(512,)☯MobilenetV1/Conv2d_10_depthwise/BatchNorm/moving_variance:0☯☯294卍op☯294☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/BatchNorm/FusedBatchNorm☯289 290 291 292 293☯295 296 297 298 299卍ts☯295☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/BatchNorm/FusedBatchNorm:0☯294☯300卍op☯300☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/Relu6☯295☯301卍ts☯301☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_depthwise/Relu6:0☯300☯303&ts☯302☯(1, 1, 512, 512)☯MobilenetV1/Conv2d_10_pointwise/weights:0☯☯303卍op☯303☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/Conv2D☯301 302☯304卍ts☯304☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/Conv2D:0☯303☯309&ts☯305☯(512,)☯MobilenetV1/Conv2d_10_pointwise/BatchNorm/gamma:0☯☯309&ts☯306☯(512,)☯MobilenetV1/Conv2d_10_pointwise/BatchNorm/beta:0☯☯309&ts☯307☯(512,)☯MobilenetV1/Conv2d_10_pointwise/BatchNorm/moving_mean:0☯☯309&ts☯308☯(512,)☯MobilenetV1/Conv2d_10_pointwise/BatchNorm/moving_variance:0☯☯309卍op☯309☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/BatchNorm/FusedBatchNorm☯304 305 306 307 308☯310 311 312 313 314卍ts☯310☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/BatchNorm/FusedBatchNorm:0☯309☯315卍op☯315☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/Relu6☯310☯316卍ts☯316☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_10_pointwise/Relu6:0☯315☯318&ts☯317☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_11_depthwise/depthwise_weights:0☯☯318卍op☯318☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/depthwise☯316 317☯319卍ts☯319☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/depthwise:0☯318☯324&ts☯320☯(512,)☯MobilenetV1/Conv2d_11_depthwise/BatchNorm/gamma:0☯☯324&ts☯321☯(512,)☯MobilenetV1/Conv2d_11_depthwise/BatchNorm/beta:0☯☯324&ts☯322☯(512,)☯MobilenetV1/Conv2d_11_depthwise/BatchNorm/moving_mean:0☯☯324&ts☯323☯(512,)☯MobilenetV1/Conv2d_11_depthwise/BatchNorm/moving_variance:0☯☯324卍op☯324☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/BatchNorm/FusedBatchNorm☯319 320 321 322 323☯325 326 327 328 329卍ts☯325☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/BatchNorm/FusedBatchNorm:0☯324☯330卍op☯330☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/Relu6☯325☯331卍ts☯331☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_depthwise/Relu6:0☯330☯333&ts☯332☯(1, 1, 512, 512)☯MobilenetV1/Conv2d_11_pointwise/weights:0☯☯333卍op☯333☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/Conv2D☯331 332☯334卍ts☯334☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/Conv2D:0☯333☯339&ts☯335☯(512,)☯MobilenetV1/Conv2d_11_pointwise/BatchNorm/gamma:0☯☯339&ts☯336☯(512,)☯MobilenetV1/Conv2d_11_pointwise/BatchNorm/beta:0☯☯339&ts☯337☯(512,)☯MobilenetV1/Conv2d_11_pointwise/BatchNorm/moving_mean:0☯☯339&ts☯338☯(512,)☯MobilenetV1/Conv2d_11_pointwise/BatchNorm/moving_variance:0☯☯339卍op☯339☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/BatchNorm/FusedBatchNorm☯334 335 336 337 338☯340 341 342 343 344卍ts☯340☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/BatchNorm/FusedBatchNorm:0☯339☯345卍op☯345☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/Relu6☯340☯346卍ts☯346☯(None, 14, 14, 512)☯MobilenetV1/MobilenetV1/Conv2d_11_pointwise/Relu6:0☯345☯348&ts☯347☯(3, 3, 512, 1)☯MobilenetV1/Conv2d_12_depthwise/depthwise_weights:0☯☯348卍op☯348☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/depthwise☯346 347☯349卍ts☯349☯(None, 7, 7, 512)☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/depthwise:0☯348☯354&ts☯350☯(512,)☯MobilenetV1/Conv2d_12_depthwise/BatchNorm/gamma:0☯☯354&ts☯351☯(512,)☯MobilenetV1/Conv2d_12_depthwise/BatchNorm/beta:0☯☯354&ts☯352☯(512,)☯MobilenetV1/Conv2d_12_depthwise/BatchNorm/moving_mean:0☯☯354&ts☯353☯(512,)☯MobilenetV1/Conv2d_12_depthwise/BatchNorm/moving_variance:0☯☯354卍op☯354☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/BatchNorm/FusedBatchNorm☯349 350 351 352 353☯355 356 357 358 359卍ts☯355☯(None, 7, 7, 512)☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/BatchNorm/FusedBatchNorm:0☯354☯360卍op☯360☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/Relu6☯355☯361卍ts☯361☯(None, 7, 7, 512)☯MobilenetV1/MobilenetV1/Conv2d_12_depthwise/Relu6:0☯360☯363&ts☯362☯(1, 1, 512, 1024)☯MobilenetV1/Conv2d_12_pointwise/weights:0☯☯363卍op☯363☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/Conv2D☯361 362☯364卍ts☯364☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/Conv2D:0☯363☯369&ts☯365☯(1024,)☯MobilenetV1/Conv2d_12_pointwise/BatchNorm/gamma:0☯☯369&ts☯366☯(1024,)☯MobilenetV1/Conv2d_12_pointwise/BatchNorm/beta:0☯☯369&ts☯367☯(1024,)☯MobilenetV1/Conv2d_12_pointwise/BatchNorm/moving_mean:0☯☯369&ts☯368☯(1024,)☯MobilenetV1/Conv2d_12_pointwise/BatchNorm/moving_variance:0☯☯369卍op☯369☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/BatchNorm/FusedBatchNorm☯364 365 366 367 368☯370 371 372 373 374卍ts☯370☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/BatchNorm/FusedBatchNorm:0☯369☯375卍op☯375☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/Relu6☯370☯376卍ts☯376☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_12_pointwise/Relu6:0☯375☯378&ts☯377☯(3, 3, 1024, 1)☯MobilenetV1/Conv2d_13_depthwise/depthwise_weights:0☯☯378卍op☯378☯DepthwiseConv2dNative☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/depthwise☯376 377☯379卍ts☯379☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/depthwise:0☯378☯384&ts☯380☯(1024,)☯MobilenetV1/Conv2d_13_depthwise/BatchNorm/gamma:0☯☯384&ts☯381☯(1024,)☯MobilenetV1/Conv2d_13_depthwise/BatchNorm/beta:0☯☯384&ts☯382☯(1024,)☯MobilenetV1/Conv2d_13_depthwise/BatchNorm/moving_mean:0☯☯384&ts☯383☯(1024,)☯MobilenetV1/Conv2d_13_depthwise/BatchNorm/moving_variance:0☯☯384卍op☯384☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/BatchNorm/FusedBatchNorm☯379 380 381 382 383☯385 386 387 388 389卍ts☯385☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/BatchNorm/FusedBatchNorm:0☯384☯390卍op☯390☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/Relu6☯385☯391卍ts☯391☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_depthwise/Relu6:0☯390☯393&ts☯392☯(1, 1, 1024, 1024)☯MobilenetV1/Conv2d_13_pointwise/weights:0☯☯393卍op☯393☯Conv2D☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/Conv2D☯391 392☯394卍ts☯394☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/Conv2D:0☯393☯399&ts☯395☯(1024,)☯MobilenetV1/Conv2d_13_pointwise/BatchNorm/gamma:0☯☯399&ts☯396☯(1024,)☯MobilenetV1/Conv2d_13_pointwise/BatchNorm/beta:0☯☯399&ts☯397☯(1024,)☯MobilenetV1/Conv2d_13_pointwise/BatchNorm/moving_mean:0☯☯399&ts☯398☯(1024,)☯MobilenetV1/Conv2d_13_pointwise/BatchNorm/moving_variance:0☯☯399卍op☯399☯FusedBatchNorm☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/BatchNorm/FusedBatchNorm☯394 395 396 397 398☯400 401 402 403 404卍ts☯400☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/BatchNorm/FusedBatchNorm:0☯399☯405卍op☯405☯Relu6☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/Relu6☯400☯406卍ts☯406☯(None, 7, 7, 1024)☯MobilenetV1/MobilenetV1/Conv2d_13_pointwise/Relu6:0☯405☯407卍op☯407☯AvgPool☯MobilenetV1/Logits/AvgPool_1a/AvgPool☯406☯408卍ts☯408☯(None, 1, 1, 1024)☯MobilenetV1/Logits/AvgPool_1a/AvgPool:0☯407☯&ts☯409☯(1, 1, 1024, 1001)☯MobilenetV1/Logits/Conv2d_1c_1x1/weights:0☯☯410卍op☯410☯Conv2D☯MobilenetV1/Logits/Conv2d_1c_1x1/Conv2D☯408 409☯411卍ts☯411☯(None, 1, 1, 1001)☯MobilenetV1/Logits/Conv2d_1c_1x1/Conv2D:0☯410☯413&ts☯412☯(1001,)☯MobilenetV1/Logits/Conv2d_1c_1x1/biases:0☯☯413卍op☯413☯BiasAdd☯MobilenetV1/Logits/Conv2d_1c_1x1/BiasAdd☯411 412☯414卍ts☯414☯(None, 1, 1, 1001)☯MobilenetV1/Logits/Conv2d_1c_1x1/BiasAdd:0☯413☯415卍op☯415☯Squeeze☯MobilenetV1/Logits/SpatialSqueeze☯414☯416卍ts☯416☯(None, 1001)☯MobilenetV1/Predictions/Reshape:0☯415☯417卍op☯417☯Softmax☯MobilenetV1/Predictions/Softmax☯416☯418卍ts☯418☯(None, 1001)☯MobilenetV1/Predictions/Softmax:0☯417☯420&ts☯419☯(2,)☯MobilenetV1/Predictions/Shape:0☯☯420卍op☯420☯Reshape☯MobilenetV1/Predictions/Reshape_1☯418 419☯421卍ts☯421☯(None, 1001)☯MobilenetV1/Predictions/Reshape_1:0☯420☯";</script>
<html>
<head>
<title>
</title>
<style>
#btn{
    position:fixed;
    right:10px;
    bottom:10px;
    width:100px;
    height:60px;
    background:	#DC143C;
    color:#fff;
    text-align:center;
    line-height:60px
}
#btn:hover{
     cursor:hand;
     color:#999
}
</style>
</head>
<body style="background:#e9e9e9">

<div id='svg_content'></div>
<div id='btn' onclick='changeView(this)'>合并节点</div>
<!-- <script src='NodeObj.js'></script>  -->
<!-- <script src='ShowGraph.js'></script> -->
</body>
</html>

<script type="text/javascript">var TOP_PADDING=40
var LEFT_LINE = []
var OP_COLOR={'relu':'#B8E9AE','relu6':'#B8E9AE','conv2d':'#FF9999','batchnorm':'#FFA768','depthwiseconv2d':'	#87CEFA'}
var RENAME={'DepthwiseConv2dNative':'DepthwiseConv2D','FusedBatchNorm':'BatchNorm','ConcatV2':'Concat'}
var DEFAULT_OP_COLOR='#80B1D3'
var NEED_MERGE_OPS=['relu','batchnorm','biasadd']
function GNode(type,idStr,opTypeOrTsShape,name,preIdsStr,nextIdsStr){
    this.type=type
    this.opTypeOrTsShape=opTypeOrTsShape
    this.name=name
    this.fullyName=name
    if(type=='op'){
        if(RENAME[opTypeOrTsShape])
            this.displayName=RENAME[opTypeOrTsShape]
        else
            this.displayName=opTypeOrTsShape
    }else{
        var tsName=name.split('/')
        this.displayName=tsName[tsName.length-1]
        this.shape=opTypeOrTsShape
    }
    this.id=parseInt(idStr)
    this.preIds=[]
    this.nextIds=[] 
    if(preIdsStr){
        var preIdsArr=preIdsStr.split(' ')
        for(var i in preIdsArr){
            this.preIds.push(parseInt(preIdsArr[i]))
        }
    }
    if(nextIdsStr){
        var nextIdsArr=nextIdsStr.split(' ')
        for(var i in nextIdsArr){
            this.nextIds.push(parseInt(nextIdsArr[i]))
        }
    }
    
    this.isOp=function(){
        return this.type=='op'
    }
    this.toString=function(){
        return this.name
    } 
    this.needMerge=function(){
        if(this.isOp()){
            for(var i in NEED_MERGE_OPS){
                var k=NEED_MERGE_OPS[i]
                var lowerName=this.displayName.toLowerCase()
                if(lowerName.indexOf(k)>=0){
                    return true
                }
            }
        }
        return false
    }
    this.getShapeList=function(){
        var shapeList=[]
        if(this.shape&&this.shape.length>=2){
            var len = this.shape.length
            var shape=this.shape.substring(1,len-1)
            var arr = shape.split(',')
            for(var i in arr){
                shapeList.push(parseInt(arr[i]))
            }    
        } 
        return shapeList
       
    }
    // console.log(this.name)
    if(type=='op'&&opTypeOrTsShape.toLowerCase()=='dropout'){
         var arr = name.split('_')
         this.fullyName=arr.slice(0,arr.length-1) 
         this.displayName= this.displayName+'(keep='+arr[arr.length-1]+')'
    }
    
}
function getGNode(nodeStr){  
    arr = nodeStr.split('☯') 
    obj = new GNode(arr[0],arr[1],arr[2],arr[3],arr[4],arr[5])  
    return obj
}

function gen_svg_header(width,height,content){
    var header = '<svg width="'+ width +'" height="'+ height +'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'
    header = header+'\n'+ '<defs> '+ 
             '    <marker id="arrow" markerWidth="6" markerHeight="6" refx="6" refy="3" orient="auto" markerUnits="strokeWidth"> '+ 
             '    <path d="M0,0 L0,6 L6,3 z" fill="#ccc" /> </marker> </defs>\n'
    return header+content+'</svg>'
}
function getLeftLine(topY,bottomY,bboxLeft){
    var left=null
    for(var leftRegion in LEFT_LINE){
        var arr = leftRegion.split('-')
        var fromY=parseInt(arr[0])
        var toY=parseInt(arr[1])
        if((topY>=fromY&&topY<=toY)||(bottomY>=fromY&&bottomY>=toY)){
           left = LEFT_LINE[leftRegion]-20
           delete LEFT_LINE[leftRegion]
           var min=fromY<toY?fromY:toY
           var max=toY>bottomY?toY:bottomY
           LEFT_LINE[min+'-'+max]=left
           return left           
        }
    }
    if(!left){
        left = bboxLeft-20
        LEFT_LINE[min+'-'+max]=left
    }
    return left
}
function getArrowSvg( from_bbox,to_bbox){
    var s_x=from_bbox[0]
    var s_y=from_bbox[1]
    var s_w=from_bbox[2]
    var s_h=from_bbox[3]
    var e_x=to_bbox[0]
    var e_y=to_bbox[1]
    var e_w=to_bbox[2]
    var e_h=to_bbox[3]
    var arr_svg='';
    if((s_x==e_x)&&(Math.abs(s_y-e_y)>(s_h+TOP_PADDING))){ 
        // LEFT_IDX=LEFT_IDX+1
        // var first_x=s_x-10*(LEFT_IDX)
        var first_y=s_y+(s_h)/2
        var second_y=e_y+(e_h)/2
        var first_x=getLeftLine(first_y,second_y,s_x)
        arr_svg='<line x1="'+ s_x+'" y1="'+ first_y+'" x2="'+first_x+'" y2="'+first_y+ '" style="stroke:#ccc;stroke-width:2"/>' 
        arr_svg =arr_svg+'<line x1="'+ first_x +'" y1="'+ first_y +'" x2="'+ first_x +'" y2="'+ second_y + '" style="stroke:#ccc;stroke-width:2"/>' 
        arr_svg =arr_svg+'<line x1="'+ first_x +'" y1="'+ second_y +'" x2="'+ s_x +'" y2="'+ second_y + '" style="stroke:#ccc;stroke-width:2" marker-end="url(#arrow)"/>'  
    }else{
        var from_x = s_x+(s_w)/2
        var from_y = s_y+s_h
        var to_x = e_x+(e_w)/2
        var to_y = e_y 
        arr_svg ='<line x1="'+ from_x +'" y1="'+ from_y +'" x2="'+ to_x +'" y2="'+ to_y + '" style="stroke:#ccc;stroke-width:2" marker-end="url(#arrow)"/>' 
    }
    return  arr_svg
}
function getOpSvg(op_node){
    var x=op_node.bbox[0]
    var y=op_node.bbox[1]
    var w=op_node.bbox[2]
    var h = op_node.bbox[3]
    var cx = x+w/2
    var cy = y+h/2
    var txt=op_node.displayName
    var lower_txt = txt.toLowerCase() 
    var color = DEFAULT_OP_COLOR
    if(OP_COLOR[lower_txt]){
        color=OP_COLOR[lower_txt]
    } 
    var fully_name=op_node.fullyName
    var txt_svg = '<text text-anchor="middle" x="'+ cx +'" y="'+ (cy+5)+'" fill="'+color+'"><title>'+fully_name+'</title>'+txt+'</text>'
    var op_svg = '<ellipse cx="'+ cx +'" cy="'+ cy +'" rx="'+( w/2)+'" ry="'+  (h/2)+'" style="fill:#fff;stroke:'+color+';stroke-width:4"><title>'+ fully_name+'</title></ellipse>'
    txt_svg =txt_svg+ '<text font-size="12" text-anchor="middle" x="'+ cx +'" y="'+ (cy+h-5)+'" fill="#999">'+fully_name+'</text>' 
    
    return op_svg+txt_svg
}
function getTensorSvg( tensor_node){ 
    var x=tensor_node.bbox[0]
    var y=tensor_node.bbox[1]
    var w=tensor_node.bbox[2]
    var h=tensor_node.bbox[3]
    var cx = x+w/2
    var cy = y+h/2
    var fully_name = tensor_node.fullyName
    var txt = tensor_node.displayName
    var txt_svg = '<text  text-anchor="middle" x="'+(cx)+'" y="'+ (cy-5)+'" fill="#999"><title>'+fully_name+'</title>'+txt+'</text>' 
    var rect_svg = '<text  font-size="14" text-anchor="middle" x="'+(cx)+'" y="'+ (cy+15)+'" fill="#999"><title>'+fully_name+'</title>'+ tensor_node.shape +'</text>' 
    var tensor_svg = '<rect x="'+(x)+'" y="'+(y)+'" width="'+(w)+'" height="'+( h)+
                    '" style="fill:#fff;stroke-width:2;stroke:#ccc"> <title>'+fully_name+'</title></rect>'
   
    return tensor_svg+txt_svg +rect_svg
    
}    
function getMergedTensorSvg( tensor_node){ 
 
    var x=tensor_node.bbox[0]
    var y=tensor_node.bbox[1]
    var w=tensor_node.bbox[2]
    var h=tensor_node.bbox[3]
    var cx = x+w/2
    var cy = y+h/2
    var fully_name = tensor_node.fullyName
    // var txt = tensor_node.displayName
    // var txt_svg = '<text  text-anchor="middle" x="'+(cx)+'" y="'+ (cy-5)+'" fill="#999"><title>'+fully_name+'</title>'+txt+'</text>' 
    // var rect_svg = '<text  font-size="14" text-anchor="middle" x="'+(cx)+'" y="'+ (cy+15)+'" fill="#999"><title>'+fully_name+'</title>'+ tensor_node.shape +'</text>' 
    // var tensor_svg = '<rect x="'+(x)+'" y="'+(y)+'" width="'+(w)+'" height="'+( h)+
                    // '" style="fill:#fff;stroke-width:2;stroke:#ccc"> <title>'+fully_name+'</title></rect>' 
    var rect_svg = '<text  font-size="14" text-anchor="middle" x="'+(cx)+'" y="'+ (cy+5)+'" fill="#999"><title>'+fully_name+'</title>'+ tensor_node.shape +'</text>' 
    var tensor_svg = '<rect x="'+(x)+'" y="'+(y)+'" width="'+(w)+'" height="'+( h)+
                     '" style="fill:#fff;stroke-width:2;stroke:#ccc"> <title>'+fully_name+'</title></rect>'
   
    return tensor_svg  +rect_svg
    
}
function checkIsType(lowerType,checkedStr){
    var lowerStr = checkedStr.toLowerCase() 
    if(lowerStr.indexOf(lowerType)>=0)
        return true
    return false
}  
function getSecTitle(gnode,gnodeMap){
    var displayName=gnode.displayName
    if(checkIsType('conv2d',displayName)){
        var weightShape=null
        for(var i in gnode.preIds){
               var preNode=gnodeMap[gnode.preIds[i]]
               var lowerName = preNode.displayName.toLowerCase()
               if(lowerName.indexOf('weights')>=0){
                    weightShape=preNode.getShapeList()
                    break
               }
        } 
        if(weightShape&&weightShape.length==4){
            if(checkIsType('depthwise',displayName)){//depthwise 
               return 'k_hw='+weightShape[0]+'x'+weightShape[1]+',out_c:'+(weightShape[2]*weightShape[3])
            }else{//conv2d
               return 'k_hw:'+weightShape[0]+'x'+weightShape[1]+',out_c:'+weightShape[3]
            }
        }
    }
    return null
}  
function getMergedOpSvg(mergedNode,gnodeMap){
    var svg=''
    var x=mergedNode.bbox[0]
    var y=mergedNode.bbox[1]
    var w=mergedNode.bbox[2]
    var h = mergedNode.bbox[3]
    var layerH=h/mergedNode.nodesArr.length
    var rectSvg=''
    var titleSvg=''
    var secSvg=''
    var color = DEFAULT_OP_COLOR
    var borderColor='#ccc'
    for(var i in mergedNode.nodesArr){
        var op = mergedNode.nodesArr[i]
        
        var cx = x+w/2
        var cy = y+layerH*i+layerH/2
        
        var fully_name = op.fullyName
        var txt = op.displayName 
        var lower_txt = op.displayName.toLowerCase() 
        if(OP_COLOR[lower_txt]){ 
            color=OP_COLOR[lower_txt]
            borderColor=color
        } 
         
        var secTitle = getSecTitle(op,gnodeMap)
        if(secTitle){
            titleSvg += '<text  text-anchor="middle" x="'+(cx)+'" y="'+ (cy-5)+'" fill="#000"><title>'+fully_name+'</title>'+txt+'</text>' 
            secSvg += '<text  font-size="12" text-anchor="middle" x="'+(cx)+'" y="'+ (cy+15)+'" fill="#000"><title>'+fully_name+'</title>'+secTitle+ '</text>'  
        }else{
            titleSvg += '<text  text-anchor="middle" x="'+(cx)+'" y="'+ (cy+5)+'" fill="#000"><title>'+fully_name+'</title>'+txt+'</text>'  
        }
        rectSvg += '<rect x="'+(x)+'" y="'+(y+i*layerH)+'" width="'+(w)+'" height="'+( layerH)+
                        '" style="fill:'+color+';stroke-width:2;stroke:'+borderColor+'"> <title>'+fully_name+'</title></rect>' 
    }
    return rectSvg+secSvg+titleSvg
}
        
    
    
    
    
    
    
    
    </script>
<script type="text/javascript">
function parseLayers(layersStr){ 
    var layers = layersStr.split("卍")
    var layerNodes=[]
    var layerMap=[]
    console.log(layers.length)
    for(var i in layers){
        var layer = layers[i] 
        var curNodes=[]
        var nodes = layer.split('&')
        for(var j in nodes){ 
            var nodeStr = nodes[j]
            var gnode = getGNode(nodeStr)
            layerMap[''+gnode.id]=gnode
            curNodes.push(gnode) 
        }
        layerNodes.push(curNodes)
        
    }
    return [layerNodes,layerMap]
}
function printLayers(layers){
    for(var i in layers){
        var layer =layers[i] 
        var line='--->'
        for(var j in layer){
            var node=layer[j]
            line=line+','+node
        }
        console.log(line)
    }
}
function getNodeById(layers,id){
    for(var i in layers){
        var layer=layers[i]
        for(var j in layer){
            var node =layer[j]
            console.log(node.id,'==',id,'?',node.id==id)
            if(node.id==id)
                return node
        }
    } 
    return null
}
function DetailGraph(layers,layerMap){
    this.layers=layers
    this.layerMap=layerMap
    this.left_padding=400
    this.top_padding=TOP_PADDING
    this.ellipse_rx= 80 
    this.ellipse_ry= 20 
    this.rect_w = 80*2
    this.rect_h = 40 
    this.col_width = this.ellipse_rx*2>this.rect_w ? this.ellipse_rx*2 : this.rect_w
    this.row_height = this.ellipse_ry*2>this.rect_h ? this.ellipse_ry*2 : this.rect_h
    this.col_margin=40
    this.row_margin=40
    this.getBBox=function(node,row_idx,col_idx){  
        var l = this.left_padding+(this.col_width+this.col_margin)*col_idx
        var t = this.top_padding+(this.row_height+this.row_margin)*row_idx
        var w=0
        var h=0
        if(node.isOp()){
            w = this.ellipse_rx*2
            h = this.ellipse_ry*2
        }
        else{
            w=this.rect_w
            h=this.rect_h 
        }
        return [l,t,w,h]
    }
    this.genSvg=function(){
        var svgContent=''
        var allOps=[]
        var cols=0 
        var rows=this.layers.length
        for(var i=0;i<this.layers.length;i++){
            var layer = this.layers[i]
            if(layer.length>cols) cols=layer.length
            for(var j=0;j<layer.length;j++){
               var node=layer[j]
               var bbox = this.getBBox(node,i,j)
               node.bbox=bbox 
               if(node.isOp()){
                   allOps.push(node)
               }else{ 
                   svgContent=svgContent+getTensorSvg(node)+'\n'
               }
            }
        }
        for(var i in allOps){
            var op = allOps[i]
            svgContent=svgContent+getOpSvg(op)
            if(op.nextIds.length>0){
                var nextNode=layerMap[''+op.nextIds[0]]
                svgContent=svgContent+'\n'+getArrowSvg(op.bbox,nextNode.bbox)
            }
            for(var i in op.preIds){
                var id = op.preIds[i]
                var input = layerMap[''+id]//getNodeById(this.layers,id) 
                // console.log('--->',id)
                svgContent=svgContent+'\n'+getArrowSvg(input.bbox,op.bbox)
            }
        }
        this.svgW = this.left_padding+(this.col_width+this.col_margin)*cols
        this.svgH = this.top_padding+(this.row_height+this.row_margin)*rows
   
        return svgContent
    }    
}
function MergedNode(nodesArr){
    this.nodesArr=nodesArr
    this.addNode=function(node){
        this.nodesArr.push(node)
    }
    this.toString=function(){
        var names=''
        for(var i in this.nodesArr){
            var node = this.nodesArr[i]
            names=names+node.name+','
        }
        return names
    }
    this.getInputs=function(){
        return this.nodesArr[0].preIds
    }
    this.getOutputs=function(){
        var len = this.nodesArr.length
        return this.nodesArr[len-1].nextIds
    }
}
function MergedGraph(layers,layerMap){
    this.layers=layers
    this.layerMap=layerMap
    this.left_padding=600
    this.top_padding=TOP_PADDING
    this.cur_top=[] 
    this.rect_w = 80*2
    this.rect_h = 40 
    this.col_width =   this.rect_w
    this.row_height =   this.rect_h
    this.col_margin=40
    this.row_margin=40
    this.getMergedBBox=function(node,row_idx,col_idx){
        var opsNum=node.nodesArr.length
        var l = this.left_padding+(this.col_width+this.col_margin)*col_idx
        var t = this.cur_top[''+row_idx]?(this.cur_top[''+row_idx]+this.top_padding):this.top_padding
        // var t =this.cur_top+ this.top_padding+(this.row_height+this.row_margin)*row_idx*2
         
        var w=this.rect_w
        var h=this.rect_h*node.nodesArr.length
        var outputTop=this.top_padding+h+t
        this.cur_top[''+row_idx]=t
        this.cur_top[''+(parseInt(row_idx)+1)]=outputTop+this.rect_h
     
        return [[l,t,w,h],[l,outputTop,w,this.rect_h]]
    }
    this.mergeOps=function(){
        var mergedLayers=[]
        var mergedMap=[]
        for(var i=0;i<this.layers.length;i++){
            var layer = this.layers[i] 
            var curLayer=[]
            for(var j=0;j<layer.length;j++){
                var node=layer[j]
                if(node.isOp()){//对计算节点合并,
                    if(node.needMerge()){//这里已经确保输入长度为1，因为只有输入长度为1的Op才可能合并
                        var inputNode = layerMap[''+node.preIds[0]]
                        var preOp =  layerMap[''+inputNode.preIds[0]]
                        var mergedPreOp = mergedMap[''+preOp.id]
                        mergedPreOp.addNode(node)
                        mergedMap[''+node.id]=mergedPreOp
                    }else{
                        var mergedNode=new MergedNode([node])
                        curLayer.push(mergedNode) 
                        mergedMap[''+node.id]=mergedNode                     
                    }
                } 
            } 
            if(curLayer.length>0){
                mergedLayers.push(curLayer) 
            }
        }
        return mergedLayers
    }
    this.genSvg=function(){
        var mergedLayers = this.mergeOps()
        var svgContent=''
        var cols=0 
        var rows=mergedLayers.length
        // console.log(mergedLayers.length)
        for(var i in mergedLayers){
            var layer =mergedLayers[i]
            if(layer.length>cols) cols=layer.length
            for(var j in layer){
                var mergedOp=layer[j]
                var bbox=this.getMergedBBox(mergedOp,i,j)
                var opBBox=bbox[0] 
                mergedOp.bbox=opBBox
                var output =layerMap[''+ mergedOp.getOutputs()[0]] 
                output.bbox=bbox[1]
                svgContent=svgContent+'\n'+getMergedTensorSvg(output)
                svgContent=svgContent+'\n'+getMergedOpSvg(mergedOp,this.layerMap)
                
                // console.log('block output==>',output.name)
                svgContent=svgContent+'\n'+getArrowSvg(mergedOp.bbox,output.bbox)
                var preIds = mergedOp.getInputs()
                for(var i in preIds){
                    var id = preIds[i]
                    var input = layerMap[''+id] 
                     
                    if(input.bbox){
                        // console.log('block input===>',input.name)
                        svgContent=svgContent+'\n'+getArrowSvg(input.bbox,opBBox)
                    } 
                }
            }
            
        }
        this.svgW = this.left_padding+(this.col_width+this.col_margin)*cols
        this.svgH = this.cur_top[rows]
        return svgContent
    }    
}
function insertSVG(svg){
     var div =document.getElementById('svg_content')
     div.innerHTML =svg
     // console.log(div.innerHTML)
}
var isMergedView=true 


function changeView(obj){
    console.log('--->',obj)
    
    var parsedNodes = parseLayers(data)
    var layers=parsedNodes[0]
    var layerMap = parsedNodes[1]
    LEFT_LINE=[]
    if(!obj){
        obj=document.getElementById('btn')
    }
    var layerout = null
    if(isMergedView){
        obj.innerHTML='展开节点'
        layerout = new MergedGraph(layers,layerMap)
    }else{
        obj.innerHTML='合并节点'
        layerout = new DetailGraph(layers,layerMap)
    }
    var svg = layerout.genSvg()
    svg =  gen_svg_header(layerout.svgW,layerout.svgH,svg) 
    insertSVG(svg)
    isMergedView=!isMergedView
}
changeView(null)
// var layerout = new DetailGraph(layers,layerMap)
// var svg = layerout.genSvg()

// svg =  gen_svg_header(layerout.svgW,layerout.svgH,svg)
// console.log('--->',svg)
// insertSVG(svg)
// var layerout = new MergedGraph(layers,layerMap)
// var svg = layerout.genSvg()
// svg =  gen_svg_header(layerout.svgW,layerout.svgH,svg) 
// insertSVG(svg)</script>